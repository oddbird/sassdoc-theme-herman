{% import 'item/preview.macros.j2' as preview %}

<section data-sassdoc-item='{{ type }}' id="{{ type }}--{{ item.context.name }}">
  {% set item_name = [item.context.name, '()']|join('') if (type == 'mixin' or type == 'function') else item.context.name %}
  {% set item_name = ['$', item_name]|join('') if type == 'variable' else item_name %}
  <h4 data-sassdoc="item-title">
    <span data-sassdoc="item-name">{{ item_name }}</span>
    <span data-sassdoc="item-type">{{ type }}</span>
  </h4>

  {% if item.description %}
    <div data-sassdoc="item-description">{{ item.description|safe }}</div>
  {% endif %}

  {{ preview.source(item, type) }}

  {% if item.example.length > 0 %}
    {% for example in item.example %}
      <div data-sassdoc="example">
        <strong data-sassdoc="example-subtitle">code example [{{ example.type }}]:</strong>

        {% if example.description %}
          <p data-sassdoc="example-description">{{ example.description|safe }}</p>
        {% endif %}

        {{ preview.code_block(
          language=example.type,
          content=example.code|escape|safe
          ) }}

        {% if example.rendered %}
          <strong data-sassdoc="example-subtitle">rendered output:</strong>
          <div data-sassdoc="example-preview">{{ example.rendered|safe }}</div>
        {% endif %}
      </div>
    {% endfor %}
  {% endif %}

  {% if item.preview %}
    {{ preview.display(
      data=sassjson,
      name=item.context.name,
      specs=item.preview
      ) }}
  {% endif %}

  {% if item.icons %}
    {{ preview.icons(item.icons) }}
  {% endif %}
</section>
